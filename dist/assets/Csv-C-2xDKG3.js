import{K as _}from"./KleurPreview-lCWdoLVy.js";import{_ as k,c as m,a as i,w as v,j as h,t as d,g as c,v as b,k as w,b as C,F as g,o as p,S as u,e as x,f as q,h as D,m as z}from"./index-r35gruVL.js";import{_ as y}from"./undo-CXMKWPxU.js";import{_ as T}from"./bakNr-BJwFtyDA.js";import{_ as A,a as N}from"./barcode-B9w6Yq3E.js";import{_ as B,a as I}from"./ruler-DmfWG5CC.js";const f="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M480-80q-82%200-155-31.5t-127.5-86Q143-252%20111.5-325T80-480q0-83%2031.5-155.5t86-127Q252-817%20325-848.5T480-880q83%200%20155.5%2031.5t127%2086q54.5%2054.5%2086%20127T880-480q0%2082-31.5%20155t-86%20127.5q-54.5%2054.5-127%2086T480-80Zm0-82q26-36%2045-75t31-83H404q12%2044%2031%2083t45%2075Zm-104-16q-18-33-31.5-68.5T322-320H204q29%2050%2072.5%2087t99.5%2055Zm208%200q56-18%2099.5-55t72.5-87H638q-9%2038-22.5%2073.5T584-178ZM170-400h136q-3-20-4.5-39.5T300-480q0-21%201.5-40.5T306-560H170q-5%2020-7.5%2039.5T160-480q0%2021%202.5%2040.5T170-400Zm216%200h188q3-20%204.5-39.5T580-480q0-21-1.5-40.5T574-560H386q-3%2020-4.5%2039.5T380-480q0%2021%201.5%2040.5T386-400Zm268%200h136q5-20%207.5-39.5T800-480q0-21-2.5-40.5T790-560H654q3%2020%204.5%2039.5T660-480q0%2021-1.5%2040.5T654-400Zm-16-240h118q-29-50-72.5-87T584-782q18%2033%2031.5%2068.5T638-640Zm-234%200h152q-12-44-31-83t-45-75q-26%2036-45%2075t-31%2083Zm-200%200h118q9-38%2022.5-73.5T376-782q-56%2018-99.5%2055T204-640Z'/%3e%3c/svg%3e",L={name:"SneakerCsv",data(){return{handle:"",title:"",vendor:"",type:"Sneaker",modelz:"",sizez:"",uitgave:"",pricez:"",amount:1,retailprice:"",barcode:"",imgSrc:"",imgPos:"",imgAlt:"",publi:!1,labelColor:"",active:"",activez:"",date:"",display:!1,bakNr:"OUT-1-"}},props:{id:{type:Number,required:!0},colorlabel:{type:String},brand:{type:String},model:{type:String},size:{type:Number},colors:{type:String},publish:{type:Boolean},createdAt:{type:String},price:{type:Number}},emits:["update","updated","return"],methods:{capitalize(r){var e=r.charAt(0),t=r.substring(1);e=e.toUpperCase(),console.log(e+t)},createProperties(){this.handle=(this.brand+"-"+this.model+"-"+this.id).replace(" ","-"),this.title=this.brand+" "+this.model,this.vendor=this.brand,this.type="Sneaker",this.retailprice=this.retailprice,this.modelz=this.model,this.sizez=this.size,this.imgPos=1,this.imgAlt=this.title},toggle(){this.active=this.active==""?"green":"",this.publi=this.publi==!1,console.log(this.id+" "+this.publi+" "+this.date)},emitCsvData(){this.createProperties(),this.$emit("update",{handle:this.handle,title:this.title,vendor:this.vendor,type:"Sneaker",model:this.modelz,size:this.sizez,uitgave:this.uitgave,price:this.price,amount:1,retailprice:this.retailprice,barcode:this.id,imgSrc:this.imgSrc,imgPos:1,imgAlt:this.title,published:this.publi})},sendBack(){this.display=!this.display,this.$emit("return",this.id,{bakNr:this.bakNr,status:3})},returnSneaker(){this.display=!this.display,document.getElementById("inputFocus").focus()}},computed:{stringId(){return this.id?String(this.id).padStart(4,"0"):"0000"}},mounted(){this.publi=this.publish,this.date=this.createdAt,this.emitCsvData()},components:{KleurPreview:_},watch:{handle:"emitCsvData",title:"emitCsvData",vendor:"emitCsvData",model:"emitCsvData",sizez:"emitCsvData",uitgave:"emitCsvData",price:"emitCsvData",amount:"emitCsvData",retailprice:"emitCsvData",barcode:"emitCsvData",imgSrc:"emitCsvData",imgPos:"emitCsvData",imgAlt:"emitCsvData",published:"emitCsvData",labelColor:"emitCsvData",active:"emitCsvData",date:"emitCsvData",bakNr(r){const e="OUT-1-";if(!r){this.bakNr=e;return}let t=r.toUpperCase().replace(/[^A-Z0-9]/g,"");t.startsWith(e.replace(/-/g,""))&&(t=t.slice(e.replace(/-/g,"").length));let a=e;t=t.slice(0,3),t.length===1?a+=`${t[0]}-`:t.length===2?a+=`${t[0]}-${t[1]}`:t.length===3&&(a+=`${t[0]}-${t[1]}-${t[2]}`),a=a.slice(0,9),a!==this.bakNr&&(this.bakNr=a)}}},Z={class:"row m-0 p-0 mx-auto text-center flex-nowrap text-dark"},j={id:"model",class:"col-3 borders"},E={id:"maat",class:"col-1 valign borders"},U={class:"text-center"},F={id:"price",class:"col-1 m-0 p-0 valign borders"},P=["value"],H={id:"img",class:"col-2 m-0 p-0 valign borders"},K=["title"],M={id:"publish",class:"col-1 m-0 p-0 valign borders"},V={class:"full m-0 p-0",id:"confirm"},O={class:"row m-0 p-0 w-100 h-100 d-flex align-items-center text-center"},R={class:"col-6 col-xl-4 bg-dark m-0 p-0 text-light mx-auto rounded"},$={class:"d-flex align-items-center justify-content-center mt-5"},Y={class:"text-yellow mx-2"},Q={class:"row m-0 p-0"},J={class:"col-6"},W={class:"row m-0 p-0"},G={class:"col-6 m-0 p-0"},X={class:"col-6 m-0 p-0"};function ee(r,e,t,a,o,s){return p(),m(g,null,[i("div",Z,[i("div",{id:"id",class:h(["col-1 borders valign text-light",t.colorlabel])},d(s.stringId),3),i("div",j,[c(d(t.brand)+" ",1),e[7]||(e[7]=i("br",null,null,-1)),c(" "+d(t.model),1)]),i("div",E,[i("div",U,d(t.size),1)]),i("div",F,[i("input",{type:"number",class:"w-100 h-100 text-center",value:t.price,placeholder:"price"},null,8,P)]),i("div",H,[v(i("input",{type:"url",class:"w-100 h-100 text-center",title:o.bakNr,"onUpdate:modelValue":e[0]||(e[0]=l=>o.imgSrc=l),placeholder:"url"},null,8,K),[[b,o.imgSrc]])]),i("div",M,[i("div",{onClick:e[1]||(e[1]=l=>{s.toggle()}),class:h([o.active,"w-100 h-100 m-0 p-0 valign"])},e[8]||(e[8]=[i("img",{src:f,class:"medz grow m-0 p-0 pointer"},null,-1)]),2)]),i("div",{onClick:e[2]||(e[2]=(...l)=>s.returnSneaker&&s.returnSneaker(...l)),id:"delete",class:"col-1 m-0 p-0 valign borders"},[i("img",{src:y,class:h(["medz grow valign m-0 p-0 pointer",o.activez])},null,2)])]),v(i("div",V,[i("div",O,[i("div",R,[i("p",$,[e[9]||(e[9]=c("Ben je zeker dat ")),i("span",Y,d(t.id),1),e[10]||(e[10]=c(" terug in stock moet?"))]),i("div",Q,[e[11]||(e[11]=i("div",{class:"col-3 text-end mb-5 justify-content-center"},[i("img",{src:T,class:"med whiteIcons"})],-1)),i("div",J,[v(i("input",{id:"inputFocus",class:"text-center rounded",placeholder:"locatie","onUpdate:modelValue":e[3]||(e[3]=l=>o.bakNr=l),onKeyup:e[4]||(e[4]=C((...l)=>s.sendBack&&s.sendBack(...l),["enter"]))},null,544),[[b,o.bakNr]])])]),i("div",W,[i("div",G,[i("button",{class:"w-100 py-3 bg-green rounded-bottom-left hover",onClick:e[5]||(e[5]=(...l)=>s.sendBack&&s.sendBack(...l))},"JA")]),i("div",X,[i("button",{class:"w-100 py-3 bg-red rounded-bottom-right hover",onClick:e[6]||(e[6]=l=>o.display=!o.display)},"NEE")])])])])],512),[[w,o.display]])],64)}const te=k(L,[["render",ee],["__scopeId","data-v-fb672947"]]),se="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M200-120q-33%200-56.5-23.5T120-200v-560q0-33%2023.5-56.5T200-840h560q33%200%2056.5%2023.5T840-760v560q0%2033-23.5%2056.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480%20450-320l-90-120-120%20160Zm-40%2080v-560%20560Z'/%3e%3c/svg%3e",ie={name:"Csv_View",data(){return{sneakerList:[],csvList:[],selectedBrand:null,selectedSize:null,sortAscending:!0,sortKey:"id"}},props:{},methods:{async getSneakers(){await u.getAll().then(r=>{this.sneakerList=r.data,this.sneakerList.forEach(e=>{Object.defineProperty(e,"publish",{value:!1})}),console.log(this.sneakerList)}).catch(r=>{console.error(r)})},emptyList(){},updateCsvList(r,e){u.update(r,e).then(t=>{console.log(t)}).catch(t=>{})},goDownload(){if(console.log("Broghetti hier uw codetti"),console.log(this.filteredSneakers),!this.filteredSneakers.length)return;const r=["handle","title","vendor","type","status","published","option1 name","option1 value","option2 name","option2 value","variant sku","variant price","variant inventory tracker","variant inventory qty","variant inventory policy","variant barcode"],e=this.filteredSneakers.map(s=>{const l=this.makeEAN13FromSneaker(s),n=s.brand+" "+s.model+" "+s.size;return{handle:s.brand+"-"+s.model+"-"+s.id,title:n,vendor:s.brand,type:"Sneaker",status:"active","option1 name":"Model","option1 value":s.model,"option2 name":"Size","option2 value":s.size,"variant sku":l,"variant price":s.price,"variant inventory tracker":"shopify","variant inventory qty":1,"variant inventory policy":"deny","variant barcode":l,published:"TRUE"}});console.log("SHOPIFY"),console.log(e);const t=[r.join(","),...e.map(s=>r.map(l=>`"${(s[l]??"").toString().replace(/"/g,'""')}"`).join(","))].join(`\r
`);console.log("CSV BRAPAPA"),console.log(t);const a=new Blob([t],{type:"text/csv;charset=utf-8;"});var o=document.createElement("a");o.href=URL.createObjectURL(a),o.setAttribute("download","sneakers.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),this.$router.push("/shopify")},toggleSort(r){this.sortKey===r?this.sortAscending=!this.sortAscending:(this.sortKey=r,this.sortAscending=!0)},returnSneaker(r,e){u.update(r,e).then(()=>{this.getSneakers()}).catch(t=>{console.log(t)})},ean13CheckDigit(r){const e=String(r).replace(/\D/g,"");if(e.length!==12)throw new Error("EAN-13 body moet 12 cijfers hebben");let t=0;for(let a=0;a<12;a++)t+=a%2===0?+e[a]:3*+e[a];return(10-t%10)%10},makeBody12FromSneaker(r){const e=(s,l)=>String(s).padStart(l,"0");let t=null;if(r.date){const s=String(r.date).replace(/\D/g,"");s.length>=8&&(t=s.slice(0,8))}if(!t&&r.createdAt){const s=new Date(r.createdAt);isNaN(s)||(t=`${s.getFullYear()}${e(s.getMonth()+1,2)}${e(s.getDate(),2)}`)}if(!t){const s=new Date;t=`${s.getFullYear()}${e(s.getMonth()+1,2)}${e(s.getDate(),2)}`}const o=(r.uniqueId??r.id??0).toString().replace(/\D/g,"").slice(-4).padStart(4,"0");return t+o},makeEAN13FromSneaker(r){const e=this.makeBody12FromSneaker(r);return e+this.ean13CheckDigit(e)}},inject:["sneakers"],computed:{filteredSneakers(){let r=this.sneakerList;return r=r.filter(e=>e.status=="6"),console.log("FILTERED: "),console.log(r),this.selectedBrand&&(r=r.filter(e=>e.brand===this.selectedBrand)),this.selectedSize&&(r=r.filter(e=>e.size===this.selectedSize)),r.sort((e,t)=>{const a=this.sortKey;return this.sortAscending?e[a]-t[a]:t[a]-e[a]})}},mounted(){},components:{SneakerCsv:te}},re={class:"m-0 p-0 vh-80 scroll"},ae={class:"row m-0 p-0 mx-auto bg-blue text-white text-center rounded-top py-2 sticky"},oe={class:"m-0 p-0 mx-auto"},le={class:"row mx-auto vh-5 bg-blue text-white valign"},ne={class:"col-1 h-100 valign justify-content-center fw-bold",title:"Totaal"},de={class:"col-3 h-100 py-1 mx-auto"};function ce(r,e,t,a,o,s){const l=D("SneakerCsv");return p(),m(g,null,[i("div",re,[i("div",ae,[i("div",{id:"id",class:"col-1 borders py-1",onClick:e[0]||(e[0]=n=>s.toggleSort("id"))},e[3]||(e[3]=[i("img",{src:A,class:"navImg"},null,-1)])),e[5]||(e[5]=i("div",{id:"merk",class:"col-3 borders py-1"},[i("img",{src:B,class:"navImg"})],-1)),i("div",{id:"maat",class:"col-1 borders py-1",onClick:e[1]||(e[1]=n=>s.toggleSort("size"))},e[4]||(e[4]=[i("img",{src:I,class:"navImg"},null,-1)])),e[6]||(e[6]=x('<div id="price" class="col-1 borders py-1" data-v-d06ee9ba><img src="'+N+'" class="navImg" data-v-d06ee9ba></div><div id="img" class="col-2 borders py-1" data-v-d06ee9ba><img src="'+se+'" class="navImg" data-v-d06ee9ba></div><div id="publish" class="col-1 borders py-1" data-v-d06ee9ba><img src="'+f+'" class="navImg" data-v-d06ee9ba></div><div id="delete" class="col-1 borders py-1" data-v-d06ee9ba><img src="'+y+'" class="navImg" data-v-d06ee9ba></div>',4))]),i("div",oe,[(p(!0),m(g,null,q(s.filteredSneakers,(n,S)=>(p(),m("div",{key:n.id},[z(l,{id:n.id,colorlabel:n.colorlabel,brand:n.brand,model:n.model,size:n.size,colors:n.colors,publish:n.publish,createdAt:n.createdAt,price:n.price,bakNr:n.bakNr,onUpdate:s.updateCsvList,onUpdated:s.getSneakers,onReturn:s.returnSneaker},null,8,["id","colorlabel","brand","model","size","colors","publish","createdAt","price","bakNr","onUpdate","onUpdated","onReturn"])]))),128))])]),i("div",le,[i("div",ne,d(o.csvList.length),1),e[7]||(e[7]=i("div",{class:"col-8"},null,-1)),i("div",de,[i("button",{onClick:e[2]||(e[2]=(...n)=>s.goDownload&&s.goDownload(...n)),id:"settingsButton",class:"w-100 h-100 px-2 mx-auto rounded bg-green fw-bold hover"},"Download CSV")])])],64)}const me=k(ie,[["render",ce],["__scopeId","data-v-d06ee9ba"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{me as C,se as _,ke as a};
