import{g as Ce}from"./_commonjsHelpers-Cpj98o6Y.js";import{q as Oe,_ as Ie,s as ve,c as te,a as l,d as ke,e as Le,F as Re,f as we,g as Ae,t as L,o as ie}from"./index-r35gruVL.js";var ge={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Te=ge.exports,Se;function De(){return Se||(Se=1,function(fe,X){((H,E)=>{fe.exports=E()})(Te,function H(){var E=typeof self<"u"?self:typeof window<"u"?window:E!==void 0?E:{},U,ne=!E.document&&!!E.postMessage,le=E.IS_PAPA_WORKER||!1,re={},me=0,n={};function s(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var i=de(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new N(i),(this._handle.streamer=this)._config=i}).call(this,e),this.parseChunk=function(t,i){var a=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<a){let p=this._config.newline;p||(r=this._config.quoteChar||'"',p=this._handle.guessLineEndings(t,r)),t=[...t.split(p).slice(a)].join(p)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(r=this._config.beforeFirstChunk(t))!==void 0&&(t=r),this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+t,r=(this._partialLine="",this._handle.parse(a,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=r.meta.cursor,a=(this._finished||(this._partialLine=a.substring(t-this._baseIndex),this._baseIndex=t),r&&r.data&&(this._rowCount+=r.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),le)E.postMessage({results:r,workerId:n.WORKER_ID,finished:a});else if(k(this._config.chunk)&&!i){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=r=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!a||!k(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(t){k(this._config.error)?this._config.error(t):le&&this._config.error&&E.postMessage({workerId:n.WORKER_ID,error:t,finished:!1})}}function _(e){var t;(e=e||{}).chunkSize||(e.chunkSize=n.RemoteChunkSize),s.call(this,e),this._nextChunk=ne?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),ne||(t.onload=V(this._chunkLoaded,this),t.onerror=V(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!ne),this._config.downloadRequestHeaders){var i,a=this._config.downloadRequestHeaders;for(i in a)t.setRequestHeader(i,a[i])}var r;this._config.chunkSize&&(r=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+r));try{t.send(this._config.downloadRequestBody)}catch(p){this._chunkError(p.message)}ne&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(i){i=t.statusText||i,this._sendError(new Error(i))}}function q(e){(e=e||{}).chunkSize||(e.chunkSize=n.LocalChunkSize),s.call(this,e);var t,i,a=typeof FileReader<"u";this.stream=function(r){this._input=r,i=r.slice||r.webkitSlice||r.mozSlice,a?((t=new FileReader).onload=V(this._chunkLoaded,this),t.onerror=V(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var r=this._input,p=(this._config.chunkSize&&(p=Math.min(this._start+this._config.chunkSize,this._input.size),r=i.call(r,this._start,p)),t.readAsText(r,this._config.encoding));a||this._chunkLoaded({target:{result:p}})},this._chunkLoaded=function(r){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(r.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;s.call(this,e=e||{}),this.stream=function(i){return t=i,this._nextChunk()},this._nextChunk=function(){var i,a;if(!this._finished)return i=this._config.chunkSize,t=i?(a=t.substring(0,i),t.substring(i)):(a=t,""),this._finished=!t,this.parseChunk(a)}}function Q(e){s.call(this,e=e||{});var t=[],i=!0,a=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(r){this._input=r,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=V(function(r){try{t.push(typeof r=="string"?r:r.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(p){this._streamError(p)}},this),this._streamError=V(function(r){this._streamCleanUp(),this._sendError(r)},this),this._streamEnd=V(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(e){var t,i,a,r,p=Math.pow(2,53),A=-p,$=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,S=0,u=0,z=!1,c=!1,g=[],o={data:[],errors:[],meta:{}};function T(m){return e.skipEmptyLines==="greedy"?m.join("").trim()==="":m.length===1&&m[0].length===0}function I(){if(o&&a&&(W("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),a=!1),e.skipEmptyLines&&(o.data=o.data.filter(function(d){return!T(d)})),j()){let d=function(O,D){k(e.transformHeader)&&(O=e.transformHeader(O,D)),g.push(O)};if(o)if(Array.isArray(o.data[0])){for(var m=0;j()&&m<o.data.length;m++)o.data[m].forEach(d);o.data.splice(0,1)}else o.data.forEach(d)}function b(d,O){for(var D=e.header?{}:[],x=0;x<d.length;x++){var R=x,y=d[x],y=((K,f)=>(w=>(e.dynamicTypingFunction&&e.dynamicTyping[w]===void 0&&(e.dynamicTyping[w]=e.dynamicTypingFunction(w)),(e.dynamicTyping[w]||e.dynamicTyping)===!0))(K)?f==="true"||f==="TRUE"||f!=="false"&&f!=="FALSE"&&((w=>{if($.test(w)&&(w=parseFloat(w),A<w&&w<p))return 1})(f)?parseFloat(f):B.test(f)?new Date(f):f===""?null:f):f)(R=e.header?x>=g.length?"__parsed_extra":g[x]:R,y=e.transform?e.transform(y,R):y);R==="__parsed_extra"?(D[R]=D[R]||[],D[R].push(y)):D[R]=y}return e.header&&(x>g.length?W("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+x,u+O):x<g.length&&W("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+x,u+O)),D}var C;o&&(e.header||e.dynamicTyping||e.transform)&&(C=1,!o.data.length||Array.isArray(o.data[0])?(o.data=o.data.map(b),C=o.data.length):o.data=b(o.data,0),e.header&&o.meta&&(o.meta.fields=g),u+=C)}function j(){return e.header&&g.length===0}function W(m,b,C,d){m={type:m,code:b,message:C},d!==void 0&&(m.row=d),o.errors.push(m)}k(e.step)&&(r=e.step,e.step=function(m){o=m,j()?I():(I(),o.data.length!==0&&(S+=m.data.length,e.preview&&S>e.preview?i.abort():(o.data=o.data[0],r(o,v))))}),this.parse=function(m,b,C){var d=e.quoteChar||'"',d=(e.newline||(e.newline=this.guessLineEndings(m,d)),a=!1,e.delimiter?k(e.delimiter)&&(e.delimiter=e.delimiter(m),o.meta.delimiter=e.delimiter):((d=((O,D,x,R,y)=>{var K,f,w,ee;y=y||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var ae=0;ae<y.length;ae++){for(var J,he=y[ae],M=0,Y=0,F=0,P=(w=void 0,new ue({comments:R,delimiter:he,newline:D,preview:10}).parse(O)),G=0;G<P.data.length;G++)x&&T(P.data[G])?F++:(J=P.data[G].length,Y+=J,w===void 0?w=J:0<J&&(M+=Math.abs(J-w),w=J));0<P.data.length&&(Y/=P.data.length-F),(f===void 0||M<=f)&&(ee===void 0||ee<Y)&&1.99<Y&&(f=M,K=he,ee=Y)}return{successful:!!(e.delimiter=K),bestDelimiter:K}})(m,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=d.bestDelimiter:(a=!0,e.delimiter=n.DefaultDelimiter),o.meta.delimiter=e.delimiter),de(e));return e.preview&&e.header&&d.preview++,t=m,i=new ue(d),o=i.parse(t,b,C),I(),z?{meta:{paused:!0}}:o||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,i.abort(),t=k(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){v.streamer._halted?(z=!1,v.streamer.parseChunk(t,!0)):setTimeout(v.resume,3)},this.aborted=function(){return c},this.abort=function(){c=!0,i.abort(),o.meta.aborted=!0,k(e.complete)&&e.complete(o),t=""},this.guessLineEndings=function(O,d){O=O.substring(0,1048576);var d=new RegExp(se(d)+"([^]*?)"+se(d),"gm"),C=(O=O.replace(d,"")).split("\r"),d=O.split(`
`),O=1<d.length&&d[0].length<C[0].length;if(C.length===1||O)return`
`;for(var D=0,x=0;x<C.length;x++)C[x][0]===`
`&&D++;return D>=C.length/2?`\r
`:"\r"}}function se(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ue(e){var t=(e=e||{}).delimiter,i=e.newline,a=e.comments,r=e.step,p=e.preview,A=e.fastMode,$=null,B=!1,v=e.quoteChar==null?'"':e.quoteChar,S=v;if(e.escapeChar!==void 0&&(S=e.escapeChar),(typeof t!="string"||-1<n.BAD_DELIMITERS.indexOf(t))&&(t=","),a===t)throw new Error("Comment character same as delimiter");a===!0?a="#":(typeof a!="string"||-1<n.BAD_DELIMITERS.indexOf(a))&&(a=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var u=0,z=!1;this.parse=function(c,g,o){if(typeof c!="string")throw new Error("Input must be a string");var T=c.length,I=t.length,j=i.length,W=a.length,m=k(r),b=[],C=[],d=[],O=u=0;if(!c)return M();if(A||A!==!1&&c.indexOf(v)===-1){for(var D=c.split(i),x=0;x<D.length;x++){if(d=D[x],u+=d.length,x!==D.length-1)u+=i.length;else if(o)return M();if(!a||d.substring(0,W)!==a){if(m){if(b=[],ee(d.split(t)),Y(),z)return M()}else ee(d.split(t));if(p&&p<=x)return b=b.slice(0,p),M(!0)}}return M()}for(var R=c.indexOf(t,u),y=c.indexOf(i,u),K=new RegExp(se(S)+se(v),"g"),f=c.indexOf(v,u);;)if(c[u]===v)for(f=u,u++;;){if((f=c.indexOf(v,f+1))===-1)return o||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),J();if(f===T-1)return J(c.substring(u,f).replace(K,v));if(v===S&&c[f+1]===S)f++;else if(v===S||f===0||c[f-1]!==S){R!==-1&&R<f+1&&(R=c.indexOf(t,f+1));var w=ae((y=y!==-1&&y<f+1?c.indexOf(i,f+1):y)===-1?R:Math.min(R,y));if(c.substr(f+1+w,I)===t){d.push(c.substring(u,f).replace(K,v)),c[u=f+1+w+I]!==v&&(f=c.indexOf(v,u)),R=c.indexOf(t,u),y=c.indexOf(i,u);break}if(w=ae(y),c.substring(f+1+w,f+1+w+j)===i){if(d.push(c.substring(u,f).replace(K,v)),he(f+1+w+j),R=c.indexOf(t,u),f=c.indexOf(v,u),m&&(Y(),z))return M();if(p&&b.length>=p)return M(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),f++}}else if(a&&d.length===0&&c.substring(u,u+W)===a){if(y===-1)return M();u=y+j,y=c.indexOf(i,u),R=c.indexOf(t,u)}else if(R!==-1&&(R<y||y===-1))d.push(c.substring(u,R)),u=R+I,R=c.indexOf(t,u);else{if(y===-1)break;if(d.push(c.substring(u,y)),he(y+j),m&&(Y(),z))return M();if(p&&b.length>=p)return M(!0)}return J();function ee(F){b.push(F),O=u}function ae(F){var P=0;return P=F!==-1&&(F=c.substring(f+1,F))&&F.trim()===""?F.length:P}function J(F){return o||(F===void 0&&(F=c.substring(u)),d.push(F),u=T,ee(d),m&&Y()),M()}function he(F){u=F,ee(d),d=[],y=c.indexOf(i,u)}function M(F){if(e.header&&!g&&b.length&&!B){var P=b[0],G=Object.create(null),be=new Set(P);let xe=!1;for(let oe=0;oe<P.length;oe++){let Z=P[oe];if(G[Z=k(e.transformHeader)?e.transformHeader(Z,oe):Z]){let ce,Ee=G[Z];for(;ce=Z+"_"+Ee,Ee++,be.has(ce););be.add(ce),P[oe]=ce,G[Z]++,xe=!0,($=$===null?{}:$)[ce]=Z}else G[Z]=1,P[oe]=Z;be.add(Z)}xe&&console.warn("Duplicate headers found and renamed."),B=!0}return{data:b,errors:C,meta:{delimiter:t,linebreak:i,aborted:z,truncated:!!F,cursor:O+(g||0),renamedHeaders:$}}}function Y(){r(M()),b=[],C=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return u}}function ye(e){var t=e.data,i=re[t.workerId],a=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var r={abort:function(){a=!0,pe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_e,resume:_e};if(k(i.userStep)){for(var p=0;p<t.results.data.length&&(i.userStep({data:t.results.data[p],errors:t.results.errors,meta:t.results.meta},r),!a);p++);delete t.results}else k(i.userChunk)&&(i.userChunk(t.results,r,t.file),delete t.results)}t.finished&&!a&&pe(t.workerId,t.results)}function pe(e,t){var i=re[e];k(i.userComplete)&&i.userComplete(t),i.terminate(),delete re[e]}function _e(){throw new Error("Not implemented.")}function de(e){if(typeof e!="object"||e===null)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=de(e[t]);return i}function V(e,t){return function(){e.apply(t,arguments)}}function k(e){return typeof e=="function"}return n.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;if(k(i)&&(t.dynamicTypingFunction=i,i={}),t.dynamicTyping=i,t.transform=!!k(t.transform)&&t.transform,!t.worker||!n.WORKERS_SUPPORTED)return i=null,n.NODE_STREAM_INPUT,typeof e=="string"?(e=(a=>a.charCodeAt(0)!==65279?a:a.slice(1))(e),i=new(t.download?_:h)(t)):e.readable===!0&&k(e.read)&&k(e.on)?i=new Q(t):(E.File&&e instanceof File||e instanceof Object)&&(i=new q(t)),i.stream(e);(i=(()=>{var a;return!!n.WORKERS_SUPPORTED&&(a=(()=>{var r=E.URL||E.webkitURL||null,p=H.toString();return n.BLOB_URL||(n.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))})(),(a=new E.Worker(a)).onmessage=ye,a.id=me++,re[a.id]=a)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=k(t.step),t.chunk=k(t.chunk),t.complete=k(t.complete),t.error=k(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},n.unparse=function(e,t){var i=!1,a=!0,r=",",p=`\r
`,A='"',$=A+A,B=!1,v=null,S=!1,u=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||n.BAD_DELIMITERS.filter(function(g){return t.delimiter.indexOf(g)!==-1}).length||(r=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(i=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(B=t.skipEmptyLines),typeof t.newline=="string"&&(p=t.newline),typeof t.quoteChar=="string"&&(A=t.quoteChar),typeof t.header=="boolean"&&(a=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");v=t.columns}t.escapeChar!==void 0&&($=t.escapeChar+A),t.escapeFormulae instanceof RegExp?S=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(S=/^[=+\-@\t\r].*$/)}})(),new RegExp(se(A),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return z(null,e,B);if(typeof e[0]=="object")return z(v||Object.keys(e[0]),e,B)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||v),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),z(e.fields||[],e.data||[],B);throw new Error("Unable to serialize unrecognized input");function z(g,o,T){var I="",j=(typeof g=="string"&&(g=JSON.parse(g)),typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(g)&&0<g.length),W=!Array.isArray(o[0]);if(j&&a){for(var m=0;m<g.length;m++)0<m&&(I+=r),I+=c(g[m],m);0<o.length&&(I+=p)}for(var b=0;b<o.length;b++){var C=(j?g:o[b]).length,d=!1,O=j?Object.keys(o[b]).length===0:o[b].length===0;if(T&&!j&&(d=T==="greedy"?o[b].join("").trim()==="":o[b].length===1&&o[b][0].length===0),T==="greedy"&&j){for(var D=[],x=0;x<C;x++){var R=W?g[x]:x;D.push(o[b][R])}d=D.join("").trim()===""}if(!d){for(var y=0;y<C;y++){0<y&&!O&&(I+=r);var K=j&&W?g[y]:y;I+=c(o[b][K],y)}b<o.length-1&&(!T||0<C&&!O)&&(I+=p)}}return I}function c(g,o){var T,I;return g==null?"":g.constructor===Date?JSON.stringify(g).slice(1,25):(I=!1,S&&typeof g=="string"&&S.test(g)&&(g="'"+g,I=!0),T=g.toString().replace(u,$),(I=I||i===!0||typeof i=="function"&&i(g,o)||Array.isArray(i)&&i[o]||((j,W)=>{for(var m=0;m<W.length;m++)if(-1<j.indexOf(W[m]))return!0;return!1})(T,n.BAD_DELIMITERS)||-1<T.indexOf(r)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?A+T+A:T)}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!ne&&!!E.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=ue,n.ParserHandle=N,n.NetworkStreamer=_,n.FileStreamer=q,n.StringStreamer=h,n.ReadableStreamStreamer=Q,E.jQuery&&((U=E.jQuery).fn.parse=function(e){var t=e.config||{},i=[];return this.each(function(p){if(!(U(this).prop("tagName").toUpperCase()==="INPUT"&&U(this).attr("type").toLowerCase()==="file"&&E.FileReader)||!this.files||this.files.length===0)return!0;for(var A=0;A<this.files.length;A++)i.push({file:this.files[A],inputElem:this,instanceConfig:U.extend({},t)})}),a(),this;function a(){if(i.length===0)k(e.complete)&&e.complete();else{var p,A,$,B,v=i[0];if(k(e.before)){var S=e.before(v.file,v.inputElem);if(typeof S=="object"){if(S.action==="abort")return p="AbortError",A=v.file,$=v.inputElem,B=S.reason,void(k(e.error)&&e.error({name:p},A,$,B));if(S.action==="skip")return void r();typeof S.config=="object"&&(v.instanceConfig=U.extend(v.instanceConfig,S.config))}else if(S==="skip")return void r()}var u=v.instanceConfig.complete;v.instanceConfig.complete=function(z){k(u)&&u(z,v.file,v.inputElem),r()},n.parse(v.file,v.instanceConfig)}}function r(){i.splice(0,1),a()}}),le&&(E.onmessage=function(e){e=e.data,n.WORKER_ID===void 0&&e&&(n.WORKER_ID=e.workerId),typeof e.input=="string"?E.postMessage({workerId:n.WORKER_ID,results:n.parse(e.input,e.config),finished:!0}):(E.File&&e.input instanceof File||e.input instanceof Object)&&(e=n.parse(e.input,e.config))&&E.postMessage({workerId:n.WORKER_ID,results:e,finished:!0})}),(_.prototype=Object.create(s.prototype)).constructor=_,(q.prototype=Object.create(s.prototype)).constructor=q,(h.prototype=Object.create(h.prototype)).constructor=h,(Q.prototype=Object.create(s.prototype)).constructor=Q,n})}(ge)),ge.exports}var Fe=De();const qe=Ce(Fe),Ne=Oe.create({baseURL:"https://api.gered.be",timeout:3e4});async function je(fe){const{data:X}=await Ne.post("/api/shopify/bulk-upsert",fe);return X}const ze={class:"p-6 space-y-4"},Me={class:"space-y-2"},Pe={class:"row"},Ue={key:0,class:"col-4 p-3 rounded bg-red-50 text-red-700"},$e={class:"list-disc ml-6"},Be={key:1,class:"col-8 border rounded"},We={class:"p-3 flex items-center justify-between"},Ke=["disabled"],He={class:"max-h-80 mx-auto text-center overflow-auto text-sm"},Qe={class:"min-w-full border-t"},Ve={class:"p-2"},Je={class:"p-2"},Ye={class:"p-2"},Ze={class:"p-2"},Ge={class:"p-2"},Xe={class:"p-2"},et={class:"p-2"},tt={class:"p-2"},it={class:"p-2"},nt={class:"p-2"},st={class:"p-2"},rt={class:"p-2"},at={class:"p-2"},ot={class:"p-2"},lt={class:"p-2"},ut={class:"p-2"},dt={key:0,class:"p-3 rounded bg-green-50 text-green-700"},ht={__name:"ShopifyImport",setup(fe){const X=ve([]),H=ve([]),E=ve(!1),U=ve(null);function ne(n){const s=e=>typeof e=="string"?e.trim():e,_=e=>e==null||e===""?null:Number(String(e).replace(",",".")),q=e=>s(e)?String(s(e)).toLowerCase():"",h=(e,t)=>e==null||e===""?t:e,Q=s(n["option1 name"]),N=s(n["option1 value"]),se=s(n["option2 name"]),ue=s(n["option2 value"]),ye=s(n["option3 name"]),pe=s(n["option3 value"]),_e=q(h(n.status,"active")),de=h(s(n["variant inventory tracker"]),"shopify"),V=q(h(s(n["variant inventory policy"]),"deny")),k=n["variant inventory qty"]==null||n["variant inventory qty"]===""?1:Number(n["variant inventory qty"]);return{handle:s(n.handle),title:s(n.title),vendor:s(n.vendor),type:s(n.type),status:_e,published:s(n.published),option1_name:Q,option1_value:N,option2_name:se,option2_value:ue,option3_name:ye,option3_value:pe,variant_sku:s(n["variant sku"]),variant_price:_(n["variant price"]),variant_compare_at_price:_(n["variant compare at price"]),variant_inventory_tracker:de,variant_inventory_qty:k,variant_inventory_policy:V,variant_barcode:s(n["variant barcode"]),image_src:s(n["image src"]),image_position:n["image position"]?Number(n["image position"]):null,image_alt_text:s(n["image alt text"])}}function le(n){const s=[],_=new Set(["active","draft","archived"]),q=new Set(["deny","continue"]);return n.forEach((h,Q)=>{const N=Q+1;h.handle||s.push(`Row ${N}: missing handle`),h.title||s.push(`Row ${N}: missing title`),h.vendor||s.push(`Row ${N}: missing vendor`),h.type||s.push(`Row ${N}: missing type`),(h.variant_price==null||Number.isNaN(h.variant_price))&&s.push(`Row ${N}: missing or invalid variant price`),(h.published==null||h.published==="")&&s.push(`Row ${N}: missing published (TRUE/FALSE)`),h.status&&!_.has(String(h.status).toLowerCase())&&s.push(`Row ${N}: invalid status (use active/draft/archived)`),(h.variant_inventory_tracker||"").toLowerCase()==="shopify"&&((h.variant_inventory_qty==null||Number.isNaN(Number(h.variant_inventory_qty)))&&s.push(`Row ${N}: missing variant inventory qty (tracker=shopify)`),h.variant_inventory_policy&&!q.has(h.variant_inventory_policy)&&s.push(`Row ${N}: invalid variant inventory policy (deny/continue)`)),(h.option1_name&&!h.option1_value||!h.option1_name&&h.option1_value)&&s.push(`Row ${N}: option1 name/value must both be provided or both empty`),(h.option2_name&&!h.option2_value||!h.option2_name&&h.option2_value)&&s.push(`Row ${N}: option2 name/value must both be provided or both empty`),(h.option3_name&&!h.option3_value||!h.option3_name&&h.option3_value)&&s.push(`Row ${N}: option3 name/value must both be provided or both empty`)}),s}function re(n){var _;const s=(_=n.target.files)==null?void 0:_[0];s&&qe.parse(s,{header:!0,skipEmptyLines:!0,complete:q=>{const h=(q.data||[]).map(ne),Q=le(h);X.value=h,H.value=Q,U.value=null},error:q=>{H.value=[String(q)]}})}async function me(){var n,s;if(!H.value.length){E.value=!0,U.value=null;try{U.value=await je(X.value)}catch(_){H.value=[((s=(n=_==null?void 0:_.response)==null?void 0:n.data)==null?void 0:s.error)||_.message]}finally{E.value=!1}}}return(n,s)=>(ie(),te("div",ze,[s[5]||(s[5]=l("h1",{class:"text-2xl font-bold"},"Shopify CSV Import",-1)),l("div",Me,[l("input",{type:"file",accept:".csv",onChange:re},null,32),s[0]||(s[0]=Le('<div class="text-sm text-gray-600" data-v-e8a927b2> Vereist: <code data-v-e8a927b2>handle</code>, <code data-v-e8a927b2>title</code>, <code data-v-e8a927b2>vendor</code>, <code data-v-e8a927b2>type</code>, <code data-v-e8a927b2>variant price</code>, <code data-v-e8a927b2>published</code>. Als <code data-v-e8a927b2>variant inventory tracker</code> = <code data-v-e8a927b2>shopify</code>, dan ook <code data-v-e8a927b2>variant inventory qty</code> en (aanrader) <code data-v-e8a927b2>variant inventory policy</code>. </div>',1))]),l("div",Pe,[H.value.length?(ie(),te("div",Ue,[s[1]||(s[1]=l("div",{class:"font-semibold mb-1"},"Validation errors:",-1)),l("ul",$e,[(ie(!0),te(Re,null,we(H.value,(_,q)=>(ie(),te("li",{key:q},L(_),1))),128))])])):ke("",!0),X.value.length?(ie(),te("div",Be,[l("div",We,[l("div",null,[s[2]||(s[2]=l("span",{class:"font-medium"},"Rows:",-1)),Ae(" "+L(X.value.length),1)]),l("button",{disabled:E.value||H.value.length,onClick:me,class:"px-4 py-2 rounded bg-black text-white disabled:opacity-50"},L(E.value?"Importingâ€¦":"Import to Shopify"),9,Ke)]),l("div",He,[l("table",Qe,[s[3]||(s[3]=l("thead",{class:"sticky top-0 bg-white"},[l("tr",null,[l("th",{class:"p-2 text-left"},"handle"),l("th",{class:"p-2 text-left"},"title"),l("th",{class:"p-2 text-left"},"vendor"),l("th",{class:"p-2 text-left"},"type"),l("th",{class:"p-2 text-left"},"status"),l("th",{class:"p-2 text-left"},"published"),l("th",{class:"p-2 text-left"},"opt1 Model"),l("th",{class:"p-2 text-left"},"val1"),l("th",{class:"p-2 text-left"},"opt2 Size"),l("th",{class:"p-2 text-left"},"val2"),l("th",{class:"p-2 text-left"},"variant sku"),l("th",{class:"p-2 text-left"},"variant price"),l("th",{class:"p-2 text-left"},"inv tracker"),l("th",{class:"p-2 text-left"},"inv qty"),l("th",{class:"p-2 text-left"},"inv policy"),l("th",{class:"p-2 text-left"},"variant barcode")])],-1)),l("tbody",null,[(ie(!0),te(Re,null,we(X.value,(_,q)=>(ie(),te("tr",{key:q,class:"border-t"},[l("td",Ve,L(_.handle),1),l("td",Je,L(_.title),1),l("td",Ye,L(_.vendor),1),l("td",Ze,L(_.type),1),l("td",Ge,L(_.status),1),l("td",Xe,L(_.published),1),l("td",et,L(_.option1_name),1),l("td",tt,L(_.option1_value),1),l("td",it,L(_.option2_name),1),l("td",nt,L(_.option2_value),1),l("td",st,L(_.variant_sku),1),l("td",rt,L(_.variant_price),1),l("td",at,L(_.variant_inventory_tracker),1),l("td",ot,L(_.variant_inventory_qty),1),l("td",lt,L(_.variant_inventory_policy),1),l("td",ut,L(_.variant_barcode),1)]))),128))])])])])):ke("",!0)]),U.value&&U.value.ok?(ie(),te("div",dt,[s[4]||(s[4]=l("div",{class:"font-semibold"},"Import complete",-1)),l("div",null,L(U.value.results.length)+" product handles processed.",1)])):ke("",!0)]))}},pt=Ie(ht,[["__scopeId","data-v-e8a927b2"]]);export{pt as default};
